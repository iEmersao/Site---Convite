<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Churras da Rafa</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", sans-serif;
      background: url('https://images.unsplash.com/photo-1555992336-cbf97e6f2c36?auto=format&fit=crop&w=1200&q=80') center/cover no-repeat fixed;
      backdrop-filter: blur(3px);
      padding: 0;
      color: #fff;
    }
    .bg-video { position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -2; filter: brightness(60%); }
    .overlay { background: rgba(0,0,0,0.55); width: 100%; min-height: 100vh; padding: 20px; position: relative; z-index: 2; }
    .container { max-width: 700px; margin: auto; background: rgba(0,0,0,0.65); padding: 25px; border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.6); }
    h1 { text-align: center; font-size: 2.2rem; margin-bottom: 10px; color: #ffb347; }
    .info { font-size: 1.1rem; margin-bottom: 20px; line-height: 1.6; }
    label { font-weight: bold; font-size: 1.1rem; }
    input, select, textarea { width: 100%; padding: 10px; border-radius: 8px; border: none; margin-top: 6px; margin-bottom: 15px; font-size: 1rem; }
    button { width: 100%; background: #ff9100; border: none; padding: 12px; color: #fff; font-size: 1.1rem; border-radius: 8px; cursor: pointer; margin-bottom: 20px; transition: 0.2s; }
    button:hover { background: #ffa733; }
    .card { background: rgba(255,255,255,0.12); padding: 15px; border-radius: 10px; margin-bottom: 12px; position: relative; }
    .deleteBtn { position: absolute; top: 10px; right: 10px; background: #ff4444; padding: 6px 10px; border-radius: 6px; font-size: 0.8rem; cursor: pointer; }
    .deleteBtn:hover { background: #ff6666; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    .item { animation: fadeIn 0.35s ease forwards; }
    @media (max-width: 600px) { h1 { font-size: 1.6rem; } .container { padding: 15px; } button { font-size: 1rem; padding: 10px; } }
    .countdown { text-align: center; font-size: 1.2rem; margin-bottom: 20px; }
    .audio-tip { text-align: center; margin: 15px 0; color: #ffb347; font-size: 1rem; }
  </style>
</head>
<body>

<!-- VÃ­deo de fundo -->
<video class="bg-video" autoplay loop muted playsinline>
  <source src="https://cdn.videvo.net/videvo_files/video/free/2014-12/large_watermarked/Hands_Beer04Videvo_preview.mp4" type="video/mp4">
</video>

<div class="overlay">
  <div class="container">
    <h1>ğŸ”¥ ChurrascÃ£o da Rafa</h1>

    <div class="countdown" id="countdown">â³ Contagem regressiva...</div>

    <div class="info">
      ğŸ“ <strong>EndereÃ§o:</strong> Rua Georgina de Albuquerque, 196<br>
      ğŸ“… <strong>Data:</strong> 13 de Dezembro<br>
      â° <strong>HorÃ¡rio:</strong> A partir das 19h<br><br>
      Vai ter carne, mÃºsica, risada, cerveja gelada e muita resenha! ğŸ˜„ğŸ»ğŸ”¥
    </div>

    <!-- Mapa do local -->
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3658.123456!2d-46.654321!3d-23.561234!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94ce59abcdef!2sRua%20Georgina%20de%20Albuquerque%2C%20196!5e0!3m2!1spt-BR!2sbr!4v1234567890"
      width="100%" height="250" style="border:0; border-radius:10px; margin-bottom:20px;" allowfullscreen loading="lazy">
    </iframe>

    <!-- MÃºsica brasileira -->
    <audio id="musica" loop>
      <source src="samba.mp3" type="audio/mpeg">
      Seu navegador nÃ£o suporta Ã¡udio.
    </audio>
    <div class="audio-tip">
      ğŸµ Da play ae:
      <button onclick="playMusica()">â–¶ï¸ Play MÃºsica</button>
    </div>

    <label>Seu nome:</label>
    <input type="text" id="nome" placeholder="Digite seu nome" />

    <label>VocÃª vai?</label>
    <select id="presenca">
      <option value="Sim">Sim! TÃ´ dentro ğŸ˜ğŸ”¥</option>
      <option value="NÃ£o">NÃ£o vou conseguir ir ğŸ˜”</option>
    </select>

    <label>Deixe um recado:</label>
    <textarea id="recado" rows="3" placeholder="Ex: Chego mais tarde..."></textarea>

    <button onclick="confirmar()">Confirmar PresenÃ§a</button>

    <h2 style="margin-bottom:10px;">ConfirmaÃ§Ãµes (<span id="contador">0</span>)</h2>
    <div id="lista"></div>
  </div>
</div>

<script>
  // Carrega confirmados e atualiza a lista/contador
  function carregar() {
    const dados = JSON.parse(localStorage.getItem("confirmados")) || [];
    const lista = document.getElementById("lista");
    lista.innerHTML = "";
    document.getElementById("contador").innerText = dados.length;

    dados.forEach((item, index) => {
      const card = document.createElement("div");
      card.className = "card item";
      card.innerHTML = `
        <strong>${item.nome}</strong> â€” <em>${item.presenca}</em><br>
        <p>${item.recado || ""}</p>
        <div class="deleteBtn" onclick="apagar(${index})">Apagar</div>
      `;
      lista.appendChild(card);
    });
  }

  // Confirma presenÃ§a e dÃ¡ feedback
  function confirmar() {
    const nome = document.getElementById("nome").value.trim();
    const presenca = document.getElementById("presenca").value;
    const recado = document.getElementById("recado").value.trim();
    const emojis = ["ğŸ–", "ğŸº", "ğŸ¶", "ğŸ”¥", "ğŸ˜„", "ğŸ¥©", "ğŸ‰"];
    const emoji = emojis[Math.floor(Math.random() * emojis.length)];

    if (!nome) {
      alert("Coloca seu nome aÃ­, pÃ´! ğŸ˜„");
      return;
    }

    const dados = JSON.parse(localStorage.getItem("confirmados")) || [];
    dados.push({ nome, presenca, recado });
    localStorage.setItem("confirmados", JSON.stringify(dados));

    document.getElementById("nome").value = "";
    document.getElementById("recado").value = "";

    carregar();
    alert(`ğŸ‰ PresenÃ§a confirmada! Valeu por avisar ${emoji}`);
  }

  // Apaga uma confirmaÃ§Ã£o pelo Ã­ndice
  function apagar(index) {
    const dados = JSON.parse(localStorage.getItem("confirmados")) || [];
    dados.splice(index, 1);
    localStorage.setItem("confirmados", JSON.stringify(dados));
    carregar();
  }

  // Contagem regressiva atÃ© o evento
  function atualizarContagemRegressiva() {
    const evento = new Date("2025-12-13T19:00:00");
    const agora = new Date();
    const diff = evento - agora;

    if (diff <= 0) {
      document.getElementById("countdown").innerText = "ğŸ‰ JÃ¡ comeÃ§ou!";
      return;
    }

    const dias = Math.floor(diff / (1000 * 60 * 60 * 24));
    const horas = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const minutos = Math.floor((diff / (1000 * 60)) % 60);
    const segundos = Math.floor((diff / 1000) % 60);

    document.getElementById("countdown").innerText =
      `â³ Faltam ${dias}d ${horas}h ${minutos}m ${segundos}s`;
  }

  // BotÃ£o para tocar mÃºsica a partir de 30s (evita bloqueio de autoplay)
  function playMusica() {
    const musica = document.getElementById("musica");
    try {
      musica.currentTime = 30; // comeÃ§a a partir de 30s
    } catch (e) {
      // alguns navegadores sÃ³ permitem setar currentTime apÃ³s metadata carregada
      musica.addEventListener("loadedmetadata", () => {
        musica.currentTime = Math.min(30, musica.duration || 30);
      }, { once: true });
    }
    musica.play().catch(() => {
      alert("Seu navegador bloqueou o Ã¡udio. Tente clicar novamente.");
    });
  }

  // InicializaÃ§Ã£o
  carregar();
  atualizarContagemRegressiva();
  setInterval(atualizarContagemRegressiva, 1000);
</script>

</body>
</html>
